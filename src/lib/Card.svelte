<script>
	import {createEventDispatcher} from "svelte";

	export let image_url, name, description;
	export let slots, waiting_list;
	export let subscribed = false, loading = false;

	const dispatch = createEventDispatcher();
</script>

<li class="w-80 max-sm:w-auto bg-gray-100 rounded-2xl overflow-hidden">
	{#if image_url}
		<img class="w-full aspect-2 bg-gray-200 object-cover" src={image_url} alt={name}>
	{:else}
		<div class="w-full aspect-2 bg-gray-200"></div>
	{/if}
	<div class="p-4 h-64 box-content flex flex-col">
		<h2 class="text-2xl font-bold">{name}</h2>
		<p class="flex-grow mt-2 mb-4 leading-tight overflow-auto whitespace-pre-line">{description || ''}</p>
		<div class="flex items-end justify-between gap-4">
			<div class="list">
				{#if slots}<span>Pl√§tze:</span><strong>{slots}</strong>{/if}
				<span>Anmeldungen:</span><strong>{waiting_list}</strong>
			</div>
			<button class="btn" class:btn-primary={!subscribed} class:loading={loading} on:click={e => dispatch('signup', e)}>
				{subscribed ? 'angemeldet' : 'anmelden'}
			</button>
		</div>
	</div>
</li>
